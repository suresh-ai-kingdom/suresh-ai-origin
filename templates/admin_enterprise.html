<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Enterprise Management</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 30px; border-radius: 8px; margin-bottom: 20px; }
        .header h1 { font-size: 28px; margin-bottom: 5px; }
        .card { background: white; border-radius: 8px; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; }
        .btn-primary { background: #4facfe; color: white; }
        .btn-secondary { background: #f0f0f0; }
        .tab-buttons { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid #ddd; }
        .tab-btn { padding: 10px 20px; border: none; background: none; cursor: pointer; font-weight: 600; border-bottom: 3px solid transparent; color: #666; }
        .tab-btn.active { border-bottom-color: #4facfe; color: #4facfe; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tenant-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
        .tenant-card { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
        .team-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .team-table th, .team-table td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        .team-table th { background: #f5f5f5; font-weight: 600; }
        .role-badge { display: inline-block; padding: 4px 8px; border-radius: 3px; font-size: 11px; font-weight: 600; }
        .role-owner { background: #fff3cd; color: #856404; }
        .role-admin { background: #f8d7da; color: #721c24; }
        .role-manager { background: #d1ecf1; color: #0c5460; }
        .role-user { background: #e2e3e5; color: #383d41; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè¢ Enterprise Management</h1>
            <p>Multi-tenant ‚Ä¢ Team Management ‚Ä¢ White-Label Branding</p>
        </div>

        <!-- Tab Navigation -->
        <div class="card">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showTab('tenants')">Tenants</button>
                <button class="tab-btn" onclick="showTab('team')">Team Members</button>
                <button class="tab-btn" onclick="showTab('branding')">White-Label</button>
            </div>

            <!-- Tenants Tab -->
            <div id="tenants" class="tab-content active">
                <h2 style="margin-bottom: 20px;">Organizations</h2>
                
                <div style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 10px;">Create New Tenant</h3>
                    <form id="tenantForm" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label>Organization Name</label>
                            <input type="text" name="name" placeholder="e.g., Acme Corp" required>
                        </div>
                        <div class="form-group">
                            <label>Custom Domain</label>
                            <input type="text" name="domain" placeholder="e.g., acme.company.com" required>
                        </div>
                        <button type="submit" class="btn btn-primary" style="grid-column: 1/-1;">Create Tenant</button>
                    </form>
                </div>

                <h3>Existing Tenants</h3>
                <div class="tenant-grid" id="tenantsList">
                    <div class="tenant-card">
                        <h4>Acme Corp</h4>
                        <p style="color: #666; font-size: 12px;">acme.company.com</p>
                        <p style="margin-top: 10px; color: #666;">Owner: admin@acme.com</p>
                        <div style="margin-top: 10px; display: flex; gap: 10px;">
                            <button class="btn btn-secondary" onclick="alert('Manage team for this tenant')">üë• Team</button>
                            <button class="btn btn-secondary" onclick="alert('Customize branding')">üé® Brand</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Tab -->
            <div id="team" class="tab-content">
                <h2 style="margin-bottom: 20px;">Team Members</h2>

                <div style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 10px;">Add Team Member</h3>
                    <form id="teamForm" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label>Role</label>
                            <select name="role">
                                <option value="viewer">Viewer (read-only)</option>
                                <option value="user">User (read & write)</option>
                                <option value="manager">Manager (+ invite)</option>
                                <option value="admin">Admin (all)</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary" style="grid-column: 1/-1;">Send Invite</button>
                    </form>
                </div>

                <h3>Current Team</h3>
                <table class="team-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Admin User</td>
                            <td>admin@company.com</td>
                            <td><span class="role-badge role-owner">OWNER</span></td>
                            <td>‚úÖ Active</td>
                            <td>
                                <button class="btn btn-secondary" onclick="alert('Edit role')" style="padding: 5px 10px; font-size: 12px;">Edit</button>
                            </td>
                        </tr>
                        <tr>
                            <td>John Manager</td>
                            <td>john@company.com</td>
                            <td><span class="role-badge role-admin">ADMIN</span></td>
                            <td>‚úÖ Active</td>
                            <td>
                                <button class="btn btn-secondary" onclick="alert('Edit role')" style="padding: 5px 10px; font-size: 12px;">Edit</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Sarah Operator</td>
                            <td>sarah@company.com</td>
                            <td><span class="role-badge role-user">USER</span></td>
                            <td>‚è≥ Invited (expires in 3 days)</td>
                            <td>
                                <button class="btn btn-secondary" onclick="alert('Resend invite')" style="padding: 5px 10px; font-size: 12px;">Resend</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h3 style="margin-top: 20px;">Role Permissions</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                    <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
                        <strong>Owner</strong>
                        <ul style="font-size: 12px; color: #666; margin-top: 8px;">
                            <li>‚úÖ All permissions</li>
                            <li>‚úÖ Manage team</li>
                            <li>‚úÖ Billing</li>
                        </ul>
                    </div>
                    <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
                        <strong>Admin</strong>
                        <ul style="font-size: 12px; color: #666; margin-top: 8px;">
                            <li>‚úÖ Read & write all</li>
                            <li>‚úÖ Delete data</li>
                            <li>‚úÖ Invite users</li>
                        </ul>
                    </div>
                    <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
                        <strong>Manager</strong>
                        <ul style="font-size: 12px; color: #666; margin-top: 8px;">
                            <li>‚úÖ Read & write</li>
                            <li>‚úÖ Invite users</li>
                            <li>‚ùå Delete data</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Branding Tab -->
            <div id="branding" class="tab-content">
                <h2 style="margin-bottom: 20px;">White-Label Customization</h2>

                <form id="brandingForm" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>Logo URL</label>
                        <input type="url" name="logo_url" placeholder="https://..." value="https://example.com/logo.png">
                    </div>
                    <div class="form-group">
                        <label>Favicon URL</label>
                        <input type="url" name="favicon_url" placeholder="https://..." value="https://example.com/favicon.ico">
                    </div>

                    <div class="form-group">
                        <label>Primary Color</label>
                        <input type="color" name="primary_color" value="#667eea">
                    </div>
                    <div class="form-group">
                        <label>Secondary Color</label>
                        <input type="color" name="secondary_color" value="#764ba2">
                    </div>

                    <div class="form-group">
                        <label>Email From Name</label>
                        <input type="text" name="email_from_name" value="SURESH AI ORIGIN">
                    </div>
                    <div class="form-group">
                        <label>Email From Address</label>
                        <input type="email" name="email_from_address" value="noreply@suresh-ai-origin.com">
                    </div>

                    <div class="form-group" style="grid-column: 1/-1;">
                        <label>Custom CSS</label>
                        <textarea name="custom_css" style="height: 150px; font-family: monospace; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">/* Add custom CSS here */
:root {
    --primary: #667eea;
    --secondary: #764ba2;
}</textarea>
                    </div>

                    <button type="submit" class="btn btn-primary" style="grid-column: 1/-1;">Save Branding</button>
                </form>

                <h3 style="margin-top: 30px;">Preview</h3>
                <div style="border: 1px solid #ddd; padding: 20px; border-radius: 5px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-align: center;">
                    <div style="font-size: 20px; margin-bottom: 10px;">üé®</div>
                    <h4>White-Label Preview</h4>
                    <p style="margin-top: 5px; opacity: 0.9;">Your brand will appear here</p>
                </div>

                <h3 style="margin-top: 30px;">Email Templates</h3>
                <p style="color: #666; margin-bottom: 10px;">Customize email templates for your organization:</p>
                <div style="display: grid; gap: 10px;">
                    <button class="btn btn-secondary" onclick="alert('Edit welcome email template')">üìß Welcome Email</button>
                    <button class="btn btn-secondary" onclick="alert('Edit confirmation email template')">üìß Confirmation Email</button>
                    <button class="btn btn-secondary" onclick="alert('Edit recovery email template')">üìß Recovery Email</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Create tenant
        document.getElementById('tenantForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const tenant = Object.fromEntries(formData);

            try {
                const response = await fetch('/api/tenants', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(tenant)
                });

                const data = await response.json();
                alert('‚úÖ Tenant created: ' + tenant.name);
                e.target.reset();
            } catch (error) {
                alert('‚ùå Error: ' + error.message);
            }
        });

        // Add team member
        document.getElementById('teamForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const member = Object.fromEntries(formData);

            try {
                const response = await fetch('/api/tenants/tenant_123/team', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(member)
                });

                const data = await response.json();
                alert('‚úÖ Invite sent to ' + member.email);
                e.target.reset();
            } catch (error) {
                alert('‚ùå Error: ' + error.message);
            }
        });

        // Save branding
        document.getElementById('brandingForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const branding = Object.fromEntries(formData);

            try {
                const response = await fetch('/api/tenants/tenant_123/branding', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(branding)
                });

                alert('‚úÖ Branding saved successfully');
            } catch (error) {
                alert('‚ùå Error: ' + error.message);
            }
        });
    </script>
</body>
</html>
