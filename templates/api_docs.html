<!DOCTYPE html>
<html>
<head>
  <title>API Documentation</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 0; background: #0a0e1a; color: #fff; }
    .header { background: linear-gradient(135deg, #667eea, #764ba2); padding: 40px 20px; text-align: center; }
    .header h1 { margin: 0 0 10px 0; font-size: 2.5em; }
    .header p { margin: 0; opacity: 0.9; }
    .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
    .nav-tabs { display: flex; gap: 10px; margin-bottom: 30px; border-bottom: 2px solid rgba(102, 126, 234, 0.3); }
    .tab { padding: 12px 24px; background: rgba(102, 126, 234, 0.1); border: none; color: #fff; cursor: pointer; border-radius: 8px 8px 0 0; transition: all 0.3s; }
    .tab.active { background: rgba(102, 126, 234, 0.3); border-bottom: 2px solid #667eea; }
    .tab:hover { background: rgba(102, 126, 234, 0.2); }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 40px; }
    .feature-card { background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border: 1px solid rgba(102, 126, 234, 0.3); border-radius: 12px; padding: 24px; }
    .feature-card h3 { margin: 0 0 12px 0; color: #667eea; }
    .feature-card ul { margin: 12px 0; padding-left: 20px; }
    .feature-card li { margin: 8px 0; color: #aaa; }
    .code-block { background: #1a1f2e; border: 1px solid rgba(102, 126, 234, 0.2); border-radius: 8px; padding: 20px; margin: 16px 0; overflow-x: auto; }
    .code-block pre { margin: 0; color: #aaa; }
    .endpoint { background: rgba(102, 126, 234, 0.05); border-left: 4px solid #667eea; padding: 16px; margin: 16px 0; border-radius: 4px; }
    .endpoint .method { display: inline-block; padding: 4px 12px; border-radius: 4px; font-weight: 600; font-size: 0.85em; margin-right: 12px; }
    .method.get { background: #48bb78; color: #fff; }
    .method.post { background: #4299e1; color: #fff; }
    .download-btn { display: inline-block; padding: 12px 24px; background: linear-gradient(135deg, #667eea, #764ba2); color: #fff; text-decoration: none; border-radius: 8px; margin: 10px 10px 10px 0; }
    .download-btn:hover { opacity: 0.9; }
  </style>
</head>
<body>
  <div class="header">
    <h1>üìö API Documentation</h1>
    <p>Comprehensive guide to SURESH AI ORIGIN's 60+ API endpoints</p>
  </div>

  <div class="container">
    <div class="nav-tabs">
      <button class="tab active" onclick="switchTab('overview')">Overview</button>
      <button class="tab" onclick="switchTab('endpoints')">Endpoints</button>
      <button class="tab" onclick="switchTab('authentication')">Authentication</button>
      <button class="tab" onclick="switchTab('examples')">Examples</button>
      <button class="tab" onclick="switchTab('downloads')">Downloads</button>
    </div>

    <!-- Overview Tab -->
    <div id="overview" class="tab-content active">
      <h2>üöÄ Platform Overview</h2>
      <p style="color: #aaa; line-height: 1.8; margin-bottom: 30px;">
        SURESH AI ORIGIN is a comprehensive AI-powered business intelligence platform featuring 15 integrated systems,
        intelligent automation workflows, and real-time analytics. All endpoints require admin authentication.
      </p>

      <div class="feature-grid">
        <div class="feature-card">
          <h3>ü§ñ AI Features (5)</h3>
          <ul>
            <li>AI Content Generator</li>
            <li>Smart Recommendations</li>
            <li>AI Chatbot</li>
            <li>Predictive Analytics</li>
            <li>Voice Analytics</li>
          </ul>
        </div>

        <div class="feature-card">
          <h3>üìä Analytics (5)</h3>
          <ul>
            <li>Market Intelligence</li>
            <li>Payment Intelligence</li>
            <li>Growth Forecast</li>
            <li>Customer CLV</li>
            <li>Churn Prediction</li>
          </ul>
        </div>

        <div class="feature-card">
          <h3>üéØ Marketing (5)</h3>
          <ul>
            <li>Campaign Generator</li>
            <li>Segment Optimization</li>
            <li>Social Auto-Share</li>
            <li>Email Timing</li>
            <li>Dynamic Pricing</li>
          </ul>
        </div>
      </div>

      <h3>üîó Base URL</h3>
      <div class="code-block">
        <pre>http://localhost:5000</pre>
      </div>

      <h3>üìà Statistics</h3>
      <div class="feature-grid">
        <div class="feature-card">
          <h3>60+</h3>
          <p style="color: #aaa;">API Endpoints</p>
        </div>
        <div class="feature-card">
          <h3>15</h3>
          <p style="color: #aaa;">AI Systems</p>
        </div>
        <div class="feature-card">
          <h3>5</h3>
          <p style="color: #aaa;">Auto Workflows</p>
        </div>
      </div>
    </div>

    <!-- Endpoints Tab -->
    <div id="endpoints" class="tab-content">
      <h2>üì° API Endpoints</h2>

      <h3>AI Generator</h3>
      <div class="endpoint">
        <span class="method post">POST</span>
        <code>/api/ai/generate</code>
        <p style="color: #aaa; margin-top: 8px;">Generate AI content (email, product description, social post)</p>
      </div>

      <h3>Recommendations</h3>
      <div class="endpoint">
        <span class="method get">GET</span>
        <code>/api/recommendations/generate?days=90</code>
        <p style="color: #aaa; margin-top: 8px;">Get smart product recommendations</p>
      </div>

      <h3>Churn Prediction</h3>
      <div class="endpoint">
        <span class="method post">POST</span>
        <code>/api/churn/risk</code>
        <p style="color: #aaa; margin-top: 8px;">Compute churn risk for customer</p>
      </div>
      <div class="endpoint">
        <span class="method get">GET</span>
        <code>/api/churn/at-risk?days=90&threshold=0.7</code>
        <p style="color: #aaa; margin-top: 8px;">Get list of at-risk customers</p>
      </div>

      <h3>Automation Workflows</h3>
      <div class="endpoint">
        <span class="method post">POST</span>
        <code>/api/automations/trigger</code>
        <p style="color: #aaa; margin-top: 8px;">Trigger automation workflow (churn_retention, payment_retry, etc.)</p>
      </div>
      <div class="endpoint">
        <span class="method get">GET</span>
        <code>/api/automations/history?days=7</code>
        <p style="color: #aaa; margin-top: 8px;">Get automation execution history</p>
      </div>

      <h3>Voice Analytics</h3>
      <div class="endpoint">
        <span class="method post">POST</span>
        <code>/api/voice/analyze</code>
        <p style="color: #aaa; margin-top: 8px;">Analyze voice transcript for sentiment and intents</p>
      </div>

      <p style="color: #667eea; margin-top: 30px;">See OpenAPI spec or Postman collection for complete endpoint list.</p>
    </div>

    <!-- Authentication Tab -->
    <div id="authentication" class="tab-content">
      <h2>üîê Authentication</h2>
      <p style="color: #aaa; margin-bottom: 20px;">All API endpoints require admin session authentication.</p>

      <h3>Login</h3>
      <div class="code-block">
        <pre>POST /admin/login
Content-Type: application/json

{
  "username": "admin",
  "password": "your_password"
}</pre>
      </div>

      <h3>Using Bearer Token (Legacy)</h3>
      <div class="code-block">
        <pre>Authorization: Bearer YOUR_ADMIN_TOKEN</pre>
      </div>

      <h3>Environment Variables</h3>
      <div class="code-block">
        <pre>ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_secure_password
ADMIN_TOKEN=your_api_token  # optional legacy support</pre>
      </div>
    </div>

    <!-- Examples Tab -->
    <div id="examples" class="tab-content">
      <h2>üí° Integration Examples</h2>

      <h3>Python Example</h3>
      <div class="code-block">
        <pre>import requests

# Login and get session
session = requests.Session()
session.post('http://localhost:5000/admin/login', json={
    'username': 'admin',
    'password': 'password'
})

# Trigger automation workflow
response = session.post('http://localhost:5000/api/automations/trigger', json={
    'workflow': 'churn_retention',
    'days': 30
})
print(response.json())</pre>
      </div>

      <h3>JavaScript Example</h3>
      <div class="code-block">
        <pre>// Fetch recommendations
fetch('http://localhost:5000/api/recommendations/generate?days=90', {
  credentials: 'include'
})
.then(r => r.json())
.then(data => console.log(data.recommendations));</pre>
      </div>

      <h3>cURL Example</h3>
      <div class="code-block">
        <pre>curl -X POST http://localhost:5000/api/voice/analyze \
  -H "Content-Type: application/json" \
  -d '{"transcript": "I love your product!", "receipt": "rcpt_123"}'</pre>
      </div>
    </div>

    <!-- Downloads Tab -->
    <div id="downloads" class="tab-content">
      <h2>üì• Downloads</h2>
      <p style="color: #aaa; margin-bottom: 30px;">Download API specifications and collections for testing and integration.</p>

      <a href="/api/docs/openapi.json" class="download-btn">üìÑ OpenAPI 3.0 Spec (JSON)</a>
      <a href="/api/docs/postman.json" class="download-btn">üìÆ Postman Collection</a>
      <a href="/docs/swagger" class="download-btn">üîç Interactive Swagger UI</a>

      <h3 style="margin-top: 40px;">Quick Start</h3>
      <div class="code-block">
        <pre># 1. Clone or download Postman collection
# 2. Import into Postman
# 3. Set base_url variable to http://localhost:5000
# 4. Login via /admin/login to establish session
# 5. Start making API calls!</pre>
      </div>
    </div>
  </div>

  <script>
    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
      
      // Show selected tab
      document.getElementById(tabName).classList.add('active');
      event.target.classList.add('active');
    }
  </script>
</body>
</html>
