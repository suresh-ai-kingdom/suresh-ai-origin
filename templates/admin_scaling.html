<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance & Scaling - Admin</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; }
        .header { background: linear-gradient(135deg, #ffa400 0%, #ff6b6b 100%); color: white; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card { background: white; border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .stat-card { display: flex; justify-content: space-between; align-items: center; }
        .stat-value { font-size: 32px; font-weight: bold; color: #ff6b6b; }
        .stat-label { color: #666; font-size: 14px; margin-top: 5px; }
        .btn { background: #ff6b6b; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; }
        .btn:hover { background: #e63946; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e5e5; }
        th { background: #f9f9f9; font-weight: 600; color: #333; }
        .region-badge { padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; background: #e3f2fd; color: #1565c0; }
        .health-good { color: #2e7d32; }
        .health-warning { color: #f57f17; }
        .health-critical { color: #c62828; }
        .metric { margin: 15px 0; padding: 10px; background: #f9f9f9; border-left: 4px solid #ff6b6b; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚ö° Performance & Scaling</h1>
        <p style="margin-top: 5px; opacity: 0.9;">Multi-Region Deployment & Optimization</p>
    </div>

    <div class="container">
        <!-- Quick Stats -->
        <div class="grid">
            <div class="card stat-card">
                <div>
                    <div class="stat-label">Global Availability</div>
                    <div class="stat-value">99.97%</div>
                </div>
                <div style="font-size: 48px;">üåç</div>
            </div>
            <div class="card stat-card">
                <div>
                    <div class="stat-label">P95 Latency</div>
                    <div class="stat-value">125ms</div>
                </div>
                <div style="font-size: 48px;">‚ö°</div>
            </div>
            <div class="card stat-card">
                <div>
                    <div class="stat-label">Active Regions</div>
                    <div class="stat-value">4</div>
                </div>
                <div style="font-size: 48px;">üó∫Ô∏è</div>
            </div>
            <div class="card stat-card">
                <div>
                    <div class="stat-label">Capacity Used</div>
                    <div class="stat-value">62%</div>
                </div>
                <div style="font-size: 48px;">üìä</div>
            </div>
        </div>

        <!-- Regional Status -->
        <div class="card">
            <h2 style="margin-bottom: 20px;">Regional Infrastructure</h2>
            <table>
                <thead>
                    <tr>
                        <th>Region</th>
                        <th>Role</th>
                        <th>Servers</th>
                        <th>CPU Usage</th>
                        <th>Memory Usage</th>
                        <th>P95 Latency</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="region-badge">US-East (Primary)</span></td>
                        <td>Primary Write</td>
                        <td>8 x 4vCPU</td>
                        <td>45% <span class="health-good">‚úì</span></td>
                        <td>62% <span class="health-good">‚úì</span></td>
                        <td>85ms</td>
                        <td><span class="health-good">üü¢ Healthy</span></td>
                    </tr>
                    <tr>
                        <td><span class="region-badge">US-West</span></td>
                        <td>Read Replica</td>
                        <td>4 x 4vCPU</td>
                        <td>38% <span class="health-good">‚úì</span></td>
                        <td>55% <span class="health-good">‚úì</span></td>
                        <td>120ms</td>
                        <td><span class="health-good">üü¢ Healthy</span></td>
                    </tr>
                    <tr>
                        <td><span class="region-badge">EU-Central</span></td>
                        <td>Read Replica</td>
                        <td>4 x 4vCPU</td>
                        <td>52% <span class="health-warning">‚ö†</span></td>
                        <td>68% <span class="health-warning">‚ö†</span></td>
                        <td>145ms</td>
                        <td><span class="health-good">üü¢ Healthy</span></td>
                    </tr>
                    <tr>
                        <td><span class="region-badge">APAC-Singapore</span></td>
                        <td>Read Replica</td>
                        <td>3 x 4vCPU</td>
                        <td>41% <span class="health-good">‚úì</span></td>
                        <td>58% <span class="health-good">‚úì</span></td>
                        <td>156ms</td>
                        <td><span class="health-good">üü¢ Healthy</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Performance Metrics -->
        <div class="card" style="margin-top: 20px;">
            <h2 style="margin-bottom: 20px;">Performance Metrics (Last 24h)</h2>
            
            <div class="metric">
                <strong>Average Latency:</strong> 112ms
                <div style="margin-top: 5px; font-size: 12px; color: #666;">
                    <progress value="112" max="500" style="width: 100%;"></progress>
                </div>
            </div>

            <div class="metric">
                <strong>P99 Latency:</strong> 385ms
                <div style="margin-top: 5px; font-size: 12px; color: #666;">
                    <progress value="385" max="1000" style="width: 100%;"></progress>
                </div>
            </div>

            <div class="metric">
                <strong>Database Connection Pool:</strong> 24/50 active
                <div style="margin-top: 5px; font-size: 12px; color: #666;">
                    <progress value="24" max="50" style="width: 100%;"></progress>
                </div>
            </div>

            <div class="metric">
                <strong>Cache Hit Rate:</strong> 78.4%
                <div style="margin-top: 5px; font-size: 12px; color: #666;">
                    <progress value="78.4" max="100" style="width: 100%;"></progress>
                </div>
            </div>

            <div class="metric">
                <strong>Error Rate:</strong> 0.03%
                <div style="margin-top: 5px; font-size: 12px; color: #666;">
                    <progress value="0.03" max="1" style="width: 100%;"></progress>
                </div>
            </div>
        </div>

        <!-- Database Optimization -->
        <div class="card" style="margin-top: 20px;">
            <h2 style="margin-bottom: 20px;">Database Optimization</h2>
            <table>
                <thead>
                    <tr>
                        <th>Optimization</th>
                        <th>Status</th>
                        <th>Impact</th>
                        <th>Implementation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Connection Pooling (pgBouncer)</td>
                        <td><span class="health-good">‚úì Enabled</span></td>
                        <td>35% faster connection acquire</td>
                        <td>pool_size=50, transaction mode</td>
                    </tr>
                    <tr>
                        <td>Query Result Caching</td>
                        <td><span class="health-good">‚úì Enabled</span></td>
                        <td>78.4% cache hit rate</td>
                        <td>Redis, TTL: 5-300s</td>
                    </tr>
                    <tr>
                        <td>Database Indexes</td>
                        <td><span class="health-good">‚úì Optimized</span></td>
                        <td>40% faster queries</td>
                        <td>Indexes on user_id, created_at, status</td>
                    </tr>
                    <tr>
                        <td>Read Replicas</td>
                        <td><span class="health-good">‚úì Active</span></td>
                        <td>50% reduction in primary load</td>
                        <td>4 replicas across regions</td>
                    </tr>
                    <tr>
                        <td>Query Optimization</td>
                        <td><span class="health-good">‚úì In Progress</span></td>
                        <td>Expected 25% improvement</td>
                        <td>Rewriting slow queries (>100ms)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Scaling Recommendations -->
        <div class="card" style="margin-top: 20px;">
            <h2 style="margin-bottom: 20px;">Scaling Recommendations</h2>
            
            <div style="margin: 20px 0; padding: 15px; background: #fff3e0; border-left: 4px solid #ff9800; border-radius: 4px;">
                <strong style="color: #e65100;">‚ö†Ô∏è Warning: EU-Central approaching limits</strong>
                <p style="margin-top: 10px; color: #666;">CPU usage at 52%, Memory at 68%. Recommend scaling to 6 servers before reaching 70% utilization.</p>
                <button class="btn" style="margin-top: 10px;">Scale Up EU-Central</button>
            </div>

            <div style="margin: 20px 0; padding: 15px; background: #e8f5e9; border-left: 4px solid #4caf50; border-radius: 4px;">
                <strong style="color: #1b5e20;">‚úì Recommendation: Enable auto-scaling</strong>
                <p style="margin-top: 10px; color: #666;">Current manual scaling works well. Recommend auto-scaling policy: Scale up at 70% CPU, scale down at 30% CPU.</p>
                <button class="btn" style="margin-top: 10px;">Enable Auto-scaling</button>
            </div>
        </div>

        <!-- Cost Analysis -->
        <div class="card" style="margin-top: 20px;">
            <h2 style="margin-bottom: 20px;">Cost Breakdown (Monthly)</h2>
            <table>
                <thead>
                    <tr>
                        <th>Service</th>
                        <th>Current Cost</th>
                        <th>Projected (1M Users)</th>
                        <th>Optimization Opportunity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Compute (4 regions)</td>
                        <td>$6,400</td>
                        <td>$8,000</td>
                        <td>Use reserved instances (-20%)</td>
                    </tr>
                    <tr>
                        <td>Database (PostgreSQL)</td>
                        <td>$2,800</td>
                        <td>$4,000</td>
                        <td>Database sharding strategy</td>
                    </tr>
                    <tr>
                        <td>Cache (Redis)</td>
                        <td>$1,200</td>
                        <td>$1,500</td>
                        <td>Increase hit rate to 85%</td>
                    </tr>
                    <tr>
                        <td>CDN</td>
                        <td>$800</td>
                        <td>$2,000</td>
                        <td>Optimize caching headers</td>
                    </tr>
                    <tr style="background: #fffde7;">
                        <td><strong>Total</strong></td>
                        <td><strong>$11,200</strong></td>
                        <td><strong>$15,500</strong></td>
                        <td><strong>-$2,400 potential savings</strong></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>